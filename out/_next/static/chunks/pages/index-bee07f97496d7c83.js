(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9565)}])},9565:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(5893),r=a(7294),l=a(1163),i=a(2798),n=a(9008),o=a.n(n),d=a(5854),c=a(8767),m=a(7066),AudioContext=a(1325);let x={districts:[{id:1,name:"Agra",state_id:"UP",state_name:"Uttar Pradesh",centroid_lat:27.1767,centroid_lng:78.0081,households_registered:125847,households_work_provided:89234,total_persondays:2156789,wages_paid:4313578e3,women_participation:52.3,works_completed:1247,works_ongoing:342,avg_wage:200,employment_percentage:70.9,data_source:"Ministry of Rural Development, Government of India",financial_year:"2023-24"},{id:2,name:"Lucknow",state_id:"UP",state_name:"Uttar Pradesh",centroid_lat:26.8467,centroid_lng:80.9462,households_registered:98456,households_work_provided:72134,total_persondays:1892456,wages_paid:3784912e3,women_participation:48.7,works_completed:987,works_ongoing:278,avg_wage:200,employment_percentage:73.2,data_source:"Ministry of Rural Development, Government of India",financial_year:"2023-24"},{id:3,name:"Kanpur Nagar",state_id:"UP",state_name:"Uttar Pradesh",centroid_lat:26.4499,centroid_lng:80.3319,households_registered:87234,households_work_provided:65123,total_persondays:1654567,wages_paid:3309134e3,women_participation:45.2,works_completed:856,works_ongoing:223,avg_wage:200,employment_percentage:74.7,data_source:"Ministry of Rural Development, Government of India",financial_year:"2023-24"},{id:4,name:"Allahabad",state_id:"UP",state_name:"Uttar Pradesh",centroid_lat:25.4358,centroid_lng:81.8463,households_registered:145678,households_work_provided:108234,total_persondays:2687456,wages_paid:5374912e3,women_participation:55.1,works_completed:1456,works_ongoing:387,avg_wage:200,employment_percentage:74.3,data_source:"Ministry of Rural Development, Government of India",financial_year:"2023-24"},{id:5,name:"Varanasi",state_id:"UP",state_name:"Uttar Pradesh",centroid_lat:25.3176,centroid_lng:82.9739,households_registered:134567,households_work_provided:98765,total_persondays:2456789,wages_paid:4913578e3,women_participation:53.4,works_completed:1234,works_ongoing:345,avg_wage:200,employment_percentage:73.4,data_source:"Ministry of Rural Development, Government of India",financial_year:"2023-24"}]},h="https://mgnrega-eirq.onrender.com";function u(e){let{onSelect:t}=e,{formatMessage:a}=(0,i.ZK)(),{playAudio:l}=(0,AudioContext.Q)(),[n,o]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[g,p]=(0,r.useState)(-1),b=(0,r.useRef)(null),v=(0,r.useRef)(null),[j,y]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=setTimeout(()=>{y(n.trim())},300);return()=>clearTimeout(e)},[n]);let{data:w,isLoading:f,error:N}=(0,c.useQuery)(["districts",j],async()=>{try{let e=await m.Z.get("".concat(h,"/api/districts"),{params:{limit:50,...j&&{search:j}},timeout:1e4});if(e.data&&e.data.districts)return e.data.districts;return console.error("Unexpected API response structure:",e.data),x.districts}catch(e){return x.districts}},{enabled:!0,staleTime:3e5,retry:1,retryDelay:1e3}),_=(null==w?void 0:w.filter(e=>{let t=n.toLowerCase();return e.name.toLowerCase().includes(t)||(e.state_name||"").toLowerCase().includes(t)}))||[];(0,r.useEffect)(()=>{let e=e=>{if(d)switch(e.key){case"ArrowDown":e.preventDefault(),p(e=>e<_.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),p(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),g>=0&&_[g]&&k(_[g]);break;case"Escape":u(!1),p(-1)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[d,g,_]),(0,r.useEffect)(()=>{if(g>=0&&v.current){let e=v.current.children[g];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[g]);let k=e=>{o(e.name),u(!1),p(-1),t(e),l("district_selected",{district_name:e.name})},D=N&&w&&w.length>0;return N&&(!w||0===w.length)?(console.error("Districts loading error:",N),(0,s.jsxs)("div",{className:"error-card",children:[(0,s.jsx)("div",{className:"error-icon",children:"❌"}),(0,s.jsx)("h3",{className:"error-title",children:"जानकारी लोड नहीं हो सकी"}),(0,s.jsx)("p",{className:"error-message",children:"कृपया अपना इंटरनेट कनेक्शन चेक करें"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:["API URL: ",h,(0,s.jsx)("br",{}),"Error: ",N.message]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"दोबारा कोशिश करें"})})]})):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-2xl border-2 border-blue-200",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDD0D"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-blue-800 mb-2",children:"अपना जिला खोजें"}),(0,s.jsx)("p",{className:"text-blue-600 text-lg",children:"नीचे बॉक्स में अपने जिले का नाम लिखें"}),(0,s.jsx)("button",{className:"audio-btn-small mt-3",onClick:()=>l("district_search_help"),"aria-label":"खोज की मदद सुनें",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.816L4.846 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.846l3.537-3.816a1 1 0 011.617.816zM16 8a2 2 0 11-4 0 2 2 0 014 0zm-2 6a4 4 0 100-8 4 4 0 000 8z",clipRule:"evenodd"})})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:b,type:"text",value:n,onChange:e=>{let t=e.target.value;o(t),u(!0),p(-1)},onFocus:()=>{u(!0),l("district_search_help")},placeholder:"जिले का नाम लिखें (जैसे: आगरा, दिल्ली)",className:"w-full px-6 py-6 text-xl border-4 border-blue-300 rounded-2xl focus:border-blue-500 focus:ring-4 focus:ring-blue-200 focus:outline-none bg-white shadow-lg font-semibold","aria-label":"जिले का नाम खोजें","aria-expanded":d,"aria-haspopup":"listbox",role:"combobox"}),D&&(0,s.jsx)("div",{className:"absolute -top-12 left-0 right-0",children:(0,s.jsxs)("div",{className:"bg-green-100 border border-green-300 rounded-lg px-3 py-2 text-sm text-green-700 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"✅"}),(0,s.jsx)("span",{children:"सरकारी डेटा उपलब्ध है (ऑफलाइन मोड)"})]})}),(0,s.jsx)("div",{className:"absolute right-6 top-1/2 transform -translate-y-1/2",children:f?(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-4 border-blue-600"}):(0,s.jsx)("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),d&&(0,s.jsx)("div",{className:"bg-white border-4 border-blue-200 rounded-2xl shadow-2xl max-h-96 overflow-y-auto",children:f?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-xl text-gray-600 font-semibold",children:"जिले खोजे जा रहे हैं..."})]}):_.length>0?(0,s.jsx)("ul",{ref:v,role:"listbox",className:"py-4",children:_.slice(0,10).map((e,t)=>(0,s.jsx)("li",{role:"option","aria-selected":t===g,className:"px-6 py-4 cursor-pointer transition-all duration-300 border-b border-gray-100 hover:bg-blue-50 ".concat(t===g?"bg-blue-100 border-blue-300 scale-[1.02]":""),onClick:()=>k(e),onMouseEnter:()=>p(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"text-3xl mr-4",children:"\uD83C\uDFDB️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-lg text-gray-600",children:e.state_name||"भारत"})]})]}),(0,s.jsxs)("button",{onClick:t=>{t.stopPropagation(),k(e)},className:"btn btn-primary",children:[(0,s.jsx)("span",{className:"mr-2",children:"✅"}),"चुनें"]})]})},e.id))}):n?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDE14"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"कोई जिला नहीं मिला"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"कृपया दूसरा नाम लिखकर कोशिश करें"})]}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"जिले का नाम लिखें"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"ऊपर बॉक्स में अपने जिले का नाम टाइप करें"})]})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1),"aria-hidden":"true"}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"\uD83D\uDD25 लोकप्रिय जिले"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:null==w?void 0:w.slice(0,6).map(e=>(0,s.jsxs)("button",{onClick:()=>k(e),className:"p-3 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 transition-all duration-300 text-center hover:scale-105",children:[(0,s.jsx)("div",{className:"text-2xl mb-1",children:"\uD83C\uDFDB️"}),(0,s.jsx)("div",{className:"font-semibold text-gray-800 text-sm",children:e.name})]},e.id))})]})]})}var g=a(6083),p=a(2091),b=e=>{let{metric:t,value:a,change:r,changeType:l,icon:n,color:o="blue"}=e,{formatMessage:d}=(0,i.ZK)(),{playAudio:c}=(0,AudioContext.Q)(),m={households:{icon:p.I$,color:"text-blue-600",bgColor:"bg-blue-100"},wages:{icon:p.t9y,color:"text-green-600",bgColor:"bg-green-100"},persondays:{icon:p.T4$,color:"text-orange-600",bgColor:"bg-orange-100"},women:{icon:p.Cib,color:"text-purple-600",bgColor:"bg-purple-100"},works:{icon:p.CP_,color:"text-indigo-600",bgColor:"bg-indigo-100"},works_completed:{icon:p.FJM,color:"text-green-600",bgColor:"bg-green-100"},works_ongoing:{icon:p.p4t,color:"text-yellow-600",bgColor:"bg-yellow-100"},default:{icon:g.CvH,color:"text-gray-600",bgColor:"bg-gray-100"}},x=m[n]||m.default,h=x.icon,u={households:"पंजीकृत परिवार",wages:"कुल मजदूरी",persondays:"व्यक्ति-दिन",women:"महिला भागीदारी",works_completed:"पूरे हुए काम",works_ongoing:"चालू काम"}[t]||t,b=e=>e&&0!==e?e>=1e7?"".concat((e/1e7).toFixed(1)," करोड़"):e>=1e5?"".concat((e/1e5).toFixed(1)," लाख"):e>=1e3?"".concat((e/1e3).toFixed(1)," हज़ार"):e.toLocaleString("hi-IN"):"0",v="wages"===t?"₹".concat(b(a)):"women"===t?"".concat((a||0).toFixed(1),"%"):b(a),j="number"==typeof r?"".concat(r>0?"+":"").concat(r.toFixed(1),"%"):"0%",y=()=>{let e="".concat(u,": ").concat(v,". ").concat("positive"===l?"पिछले महीने से बेहतर":"negative"===l?"पिछले महीने से कम":"पिछले महीने के बराबर");c("metric_explanation",{text:e})};return(0,s.jsxs)("div",{className:"metric-card ".concat(o," hover-lift cursor-pointer group relative overflow-hidden"),onClick:y,role:"button",tabIndex:0,"aria-label":"".concat(u,": ").concat(v),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&y()},children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("div",{className:"p-4 rounded-2xl ".concat(x.bgColor," group-hover:scale-110 transition-transform duration-300"),children:(0,s.jsx)(h,{className:"w-12 h-12 ".concat(x.color)})})}),(0,s.jsx)("div",{className:"value",children:v}),(0,s.jsx)("div",{className:"label",children:u}),"number"==typeof r&&(0,s.jsxs)("div",{className:"change ".concat(l," flex items-center justify-center"),"aria-label":"परिवर्तन ".concat(j),children:["positive"===l&&(0,s.jsx)(g.gSd,{className:"w-5 h-5 mr-1"}),"negative"===l&&(0,s.jsx)(g.ZuN,{className:"w-5 h-5 mr-1"}),"neutral"===l&&(0,s.jsx)(g.OtB,{className:"w-5 h-5 mr-1"}),j]}),(0,s.jsx)("div",{className:"mt-4 h-3 bg-gray-100 rounded-full overflow-hidden","aria-hidden":"true",children:(0,s.jsx)("div",{className:"h-full transition-all duration-1000 ".concat("positive"===l?"bg-gradient-to-r from-green-400 to-green-600":"negative"===l?"bg-gradient-to-r from-red-400 to-red-600":"bg-gradient-to-r from-gray-400 to-gray-500"),style:{width:"".concat(Math.min(2*Math.abs(null!=r?r:0),100),"%")}})}),(0,s.jsx)("div",{className:"absolute top-4 right-4 opacity-60 group-hover:opacity-100 transition-opacity duration-300",children:(0,s.jsx)("div",{className:"p-2 bg-white/80 rounded-full shadow-lg",children:(0,s.jsx)(g.hwG,{className:"w-4 h-4 text-gray-600"})})}),(0,s.jsx)("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-2 group-hover:translate-y-0",children:(0,s.jsxs)("div",{className:"bg-gray-800 text-white px-3 py-2 rounded-lg text-xs whitespace-nowrap flex items-center shadow-lg",children:[(0,s.jsx)(g.hwG,{className:"w-3 h-3 mr-1"}),"सुनने के लिए क्लिक करें"]})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/0 via-purple-400/0 to-green-400/0 group-hover:from-blue-400/10 group-hover:via-purple-400/10 group-hover:to-green-400/10 transition-all duration-500 rounded-3xl"})]})},v=a(3148),j=a(6495),y=a(5263);v.kL.register(v.uw,v.f$,v.od,v.jn,v.ZL,v.Dx,v.u,v.De,v.qi);let w=e=>{let{data:t,metric:a,title:r}=e,{formatMessage:l}=(0,i.ZK)(),n={labels:t.map(e=>(0,y.ZP)(new Date(e.year,e.month-1),"MMM yyyy")),datasets:[{label:r,data:t.map(e=>e[a]),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]};return(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(j.x1,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:r,font:{size:16,weight:"bold"}},tooltip:{callbacks:{label:function(e){let t=e.parsed.y;return"wages_paid"===a?"₹".concat((t/1e7).toFixed(1),"Cr"):"women_participation_pct"===a?"".concat(t.toFixed(1),"%"):t.toLocaleString()}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"wages_paid"===a?"₹".concat((e/1e7).toFixed(1),"Cr"):"women_participation_pct"===a?"".concat(e,"%"):e>=1e5?"".concat((e/1e5).toFixed(1),"L"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e}}}}}})})},f=e=>{let{districts:t,metric:a,title:r}=e,{formatMessage:l}=(0,i.ZK)(),n={labels:t.map(e=>e.name),datasets:[{label:r,data:t.map(e=>e[a]),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)"],borderWidth:2}]};return(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(j.$Q,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:r,font:{size:16,weight:"bold"}},tooltip:{callbacks:{label:function(e){let t=e.parsed.y;return"total_wages_paid"===a?"₹".concat((t/1e7).toFixed(1),"Cr"):"avg_women_participation"===a?"".concat(t.toFixed(1),"%"):t.toLocaleString()}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"total_wages_paid"===a?"₹".concat((e/1e7).toFixed(1),"Cr"):"avg_women_participation"===a?"".concat(e,"%"):e>=1e5?"".concat((e/1e5).toFixed(1),"L"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e}}}}}})})};var N=e=>{let{size:t="medium",color:a="blue"}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full border-4 border-t-transparent ".concat({small:"w-6 h-6",medium:"w-12 h-12",large:"w-16 h-16"}[t]," ").concat({blue:"border-blue-600",green:"border-green-600",white:"border-white",gray:"border-gray-600"}[a]),role:"status","aria-label":"लोड हो रहा है...",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})})};let _="https://mgnrega-eirq.onrender.com";function k(e){var t;let{currentDistrict:a}=e,{formatMessage:l}=(0,i.ZK)(),{playAudio:n}=(0,AudioContext.Q)(),[o,d]=(0,r.useState)([a]),[x,h]=(0,r.useState)("total_wages_paid"),[u,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),{data:j}=(0,c.useQuery)("all-districts",async()=>{let e=await m.Z.get("".concat(_,"/api/districts?limit=100"));return e.data.districts},{staleTime:6e5}),{data:y,isLoading:w,error:k}=(0,c.useQuery)(["district-comparison",o.map(e=>e.id).join(","),x],async()=>{if(0===o.length)return null;let e=o.map(e=>e.id).join(","),t=await m.Z.get("".concat(_,"/api/compare?district_ids=").concat(e,"&metric=").concat(x));return t.data},{enabled:o.length>0,staleTime:3e5}),D=[{key:"total_wages_paid",label:"Total Wages Paid",unit:"₹"},{key:"total_persondays",label:"Total Person Days",unit:""},{key:"avg_households_registered",label:"Average Households",unit:""},{key:"avg_women_participation",label:"Women Participation %",unit:"%"}],C=(null==j?void 0:j.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())&&!o.find(t=>t.id===e.id)))||[],F=e=>{o.length<5&&(d([...o,e]),v(!1),g(""),n("district_added",{district_name:e.name}))},S=e=>{d(o.filter(t=>t.id!==e))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"जिला तुलना"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"जिलों के बीच प्रदर्शन की तुलना करें"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:()=>n("comparison_help"),className:"audio-btn","aria-label":"Play comparison help",children:(0,s.jsx)(p.rxG,{className:"w-4 h-4"})}),y&&(0,s.jsxs)("button",{onClick:()=>{if(!y)return;let e=[["District","Value","Metric","Period"],...y.comparison.map(e=>[e.name,e.avg_value,x,y.period])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="district-comparison-".concat(x,"-").concat(Date.now(),".csv"),s.click(),window.URL.revokeObjectURL(a),n("data_exported")},className:"btn btn-secondary",children:[(0,s.jsx)(p.aBF,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Selected Districts (",o.length,"/5)"]}),(0,s.jsxs)("div",{className:"space-y-2",children:[o.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg px-3 py-2",children:[(0,s.jsx)("span",{className:"font-medium text-blue-900",children:e.name}),o.length>1&&(0,s.jsx)("button",{onClick:()=>S(e.id),className:"text-blue-600 hover:text-blue-800",children:(0,s.jsx)(p.aHS,{className:"w-4 h-4"})})]},e.id)),o.length<5&&(0,s.jsxs)("button",{onClick:()=>v(!0),className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600",children:[(0,s.jsx)(p.wEH,{className:"w-4 h-4 mr-2"}),"Add District"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Comparison Metric"}),(0,s.jsx)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:D.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))})]})]}),b&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Add District"}),(0,s.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(p.aHS,{className:"w-4 h-4"})})]}),(0,s.jsx)("input",{type:"text",placeholder:"Search districts...",value:u,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,s.jsxs)("div",{className:"max-h-40 overflow-y-auto space-y-1",children:[C.slice(0,10).map(e=>(0,s.jsxs)("button",{onClick:()=>F(e),className:"w-full text-left px-3 py-2 rounded hover:bg-blue-50 hover:text-blue-700",children:[e.name,", ",e.state_name]},e.id)),0===C.length&&u&&(0,s.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No districts found"})]})]})]}),w&&(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(N,{})}),k&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsx)("div",{className:"text-red-800",children:"Failed to load comparison data. Please try again."})}),y&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,s.jsx)(f,{districts:y.comparison,metric:x,title:null===(t=D.find(e=>e.key===x))||void 0===t?void 0:t.label})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Detailed Comparison"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"District"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Value"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Months"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.comparison.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:"total_wages_paid"===x?"₹".concat((e.avg_value/1e7).toFixed(1),"Cr"):"avg_women_participation"===x?"".concat(e.avg_value.toFixed(1),"%"):e.avg_value.toLocaleString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:"total_wages_paid"===x?"₹".concat((e.total_value/1e7).toFixed(1),"Cr"):"avg_women_participation"===x?"".concat(e.total_value.toFixed(1),"%"):e.total_value.toLocaleString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:e.months_count})]},e.id))})]})})]})]})]})}function D(e){var t;let{district:a}=e,{formatMessage:l}=(0,i.ZK)(),{playAudio:n}=(0,AudioContext.Q)(),[o,d]=(0,r.useState)("csv"),[x,h]=(0,r.useState)("12months"),[u,g]=(0,r.useState)(!1),{data:b}=(0,c.useQuery)(["district-months",a.id,24],async()=>{let e=await m.Z.get("".concat("https://mgnrega-eirq.onrender.com","/api/districts/").concat(a.id,"/months?limit=24"));return e.data.months},{enabled:!!a.id,staleTime:3e5}),v=[{key:"csv",label:"CSV (Excel)",icon:p.GzT,description:"Comma-separated values for Excel"},{key:"json",label:"JSON",icon:p.mGS,description:"Machine-readable data format"},{key:"pdf",label:"PDF Report",icon:p.yRW,description:"Formatted report document"}],j=[{key:"6months",label:"Last 6 Months",months:6},{key:"12months",label:"Last 12 Months",months:12},{key:"24months",label:"Last 24 Months",months:24},{key:"all",label:"All Available Data",months:null}],y=e=>{let t=e.map(e=>[e.year,e.month,e.households_registered,e.households_work_provided,e.total_persondays,e.wages_paid,e.women_participation_pct,e.works_completed,e.works_ongoing,e.avg_wage,new Date(e.source_date).toLocaleDateString()]);return[["Year","Month","Households Registered","Households Work Provided","Total Person Days","Wages Paid (₹)","Women Participation (%)","Works Completed","Works Ongoing","Average Wage (₹)","Source Date"],...t].map(e=>e.join(",")).join("\n")},w=e=>{var t;let s={district:{id:a.id,name:a.name,state:a.state_name},export_info:{generated_at:new Date().toISOString(),period:null===(t=j.find(e=>e.key===x))||void 0===t?void 0:t.label,total_records:e.length,format:"json"},data:e.map(e=>({year:e.year,month:e.month,date:"".concat(e.year,"-").concat(String(e.month).padStart(2,"0"),"-01"),metrics:{households_registered:e.households_registered,households_work_provided:e.households_work_provided,total_persondays:e.total_persondays,wages_paid:e.wages_paid,women_participation_pct:e.women_participation_pct,works_completed:e.works_completed,works_ongoing:e.works_ongoing,avg_wage:e.avg_wage},source_date:e.source_date}))};return JSON.stringify(s,null,2)},f=async e=>{var t;let s="\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>MGNREGA Report - ".concat(a.name,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            .header { text-align: center; margin-bottom: 30px; }\n            .district-name { font-size: 24px; font-weight: bold; color: #1f2937; }\n            .report-info { color: #6b7280; margin: 10px 0; }\n            table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: right; }\n            th { background-color: #f3f4f6; font-weight: bold; }\n            .summary { background-color: #f8fafc; padding: 20px; margin: 20px 0; border-radius: 8px; }\n            .metric { display: inline-block; margin: 10px 20px; text-align: center; }\n            .metric-value { font-size: 18px; font-weight: bold; color: #3b82f6; }\n            .metric-label { font-size: 12px; color: #6b7280; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <div class="district-name">').concat(a.name,' MGNREGA Performance Report</div>\n            <div class="report-info">Generated on ').concat(new Date().toLocaleDateString(),'</div>\n            <div class="report-info">Period: ').concat(null===(t=j.find(e=>e.key===x))||void 0===t?void 0:t.label,'</div>\n          </div>\n          \n          <div class="summary">\n            <h3>Summary Statistics</h3>\n            <div class="metric">\n              <div class="metric-value">').concat(e.reduce((e,t)=>e+(t.households_work_provided||0),0).toLocaleString(),'</div>\n              <div class="metric-label">Total Households Provided Work</div>\n            </div>\n            <div class="metric">\n              <div class="metric-value">').concat(e.reduce((e,t)=>e+(t.total_persondays||0),0).toLocaleString(),'</div>\n              <div class="metric-label">Total Person Days</div>\n            </div>\n            <div class="metric">\n              <div class="metric-value">₹').concat((e.reduce((e,t)=>e+(t.wages_paid||0),0)/1e7).toFixed(1),'Cr</div>\n              <div class="metric-label">Total Wages Paid</div>\n            </div>\n            <div class="metric">\n              <div class="metric-value">').concat((e.reduce((e,t)=>e+(t.women_participation_pct||0),0)/e.length).toFixed(1),'%</div>\n              <div class="metric-label">Avg Women Participation</div>\n            </div>\n          </div>\n          \n          <table>\n            <thead>\n              <tr>\n                <th>Month</th>\n                <th>Households Work</th>\n                <th>Person Days</th>\n                <th>Wages Paid (₹)</th>\n                <th>Women %</th>\n                <th>Works Completed</th>\n                <th>Avg Wage (₹)</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(e.map(e=>"\n                <tr>\n                  <td>".concat(new Date(e.year,e.month-1).toLocaleDateString("en-US",{month:"short",year:"numeric"}),"</td>\n                  <td>").concat((e.households_work_provided||0).toLocaleString(),"</td>\n                  <td>").concat((e.total_persondays||0).toLocaleString(),"</td>\n                  <td>").concat((e.wages_paid||0).toLocaleString(),"</td>\n                  <td>").concat((e.women_participation_pct||0).toFixed(1),"%</td>\n                  <td>").concat(e.works_completed||0,"</td>\n                  <td>").concat((e.avg_wage||0).toFixed(0),"</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n          \n          <div style="margin-top: 40px; font-size: 12px; color: #6b7280; text-align: center;">\n            Generated by MGNREGA LokDekho | Data source: data.gov.in\n          </div>\n        </body>\n      </html>\n    ');return s},N=async()=>{if(!b||0===b.length){n("error");return}g(!0);try{let e,t,s,r=b,l=j.find(e=>e.key===x);switch(l&&l.months&&(r=b.slice(0,l.months)),o){case"csv":e=y(r),t="".concat(a.name.replace(/\s+/g,"_"),"_MGNREGA_").concat(x,".csv"),s="text/csv";break;case"json":e=w(r),t="".concat(a.name.replace(/\s+/g,"_"),"_MGNREGA_").concat(x,".json"),s="application/json";break;case"pdf":let i=await f(r),d=window.open("","_blank");d.document.write(i),d.document.close(),d.focus(),setTimeout(()=>{d.print()},500),g(!1),n("data_exported");return;default:throw Error("Unsupported export format")}let c=new Blob([e],{type:s}),m=window.URL.createObjectURL(c),h=document.createElement("a");h.href=m,h.download=t,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(m),n("data_exported")}catch(e){console.error("Export failed:",e),n("error")}finally{g(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"डेटा एक्सपोर्ट करें"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"जिला प्रदर्शन डेटा डाउनलोड करें"})]}),(0,s.jsx)(p.aBF,{className:"w-6 h-6 text-blue-600"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Export Format"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:v.map(e=>{let t=e.icon;return(0,s.jsxs)("button",{onClick:()=>d(e.key),className:"p-4 border-2 rounded-lg text-left transition-colors ".concat(o===e.key?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(t,{className:"w-5 h-5 mr-2 ".concat(o===e.key?"text-blue-600":"text-gray-600")}),(0,s.jsx)("span",{className:"font-medium ".concat(o===e.key?"text-blue-900":"text-gray-900"),children:e.label})]}),(0,s.jsx)("p",{className:"text-sm ".concat(o===e.key?"text-blue-700":"text-gray-600"),children:e.description})]},e.key)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Time Period"}),(0,s.jsx)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:j.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))})]}),b&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Data Preview"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Records:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:(null===(t=j.find(e=>e.key===x))||void 0===t?void 0:t.months)?Math.min(b.length,j.find(e=>e.key===x).months):b.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Latest:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:b[0]?"".concat(b[0].month,"/").concat(b[0].year):"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"District:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:a.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Format:"}),(0,s.jsx)("span",{className:"ml-2 font-medium uppercase",children:o})]})]})]}),(0,s.jsx)("button",{onClick:N,disabled:u||!b||0===b.length,className:"w-full btn btn-primary",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.fCD,{className:"animate-spin w-4 h-4 mr-2"}),"Generating ",o.toUpperCase(),"..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.aBF,{className:"w-4 h-4 mr-2"}),"Export ",o.toUpperCase()," Report"]})}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,s.jsx)("p",{children:"• CSV files can be opened in Excel or Google Sheets"}),(0,s.jsx)("p",{children:"• JSON format is suitable for developers and data analysis"}),(0,s.jsx)("p",{children:"• PDF reports are formatted for printing and sharing"}),(0,s.jsx)("p",{children:"• All data is sourced from official government APIs"})]})]})]})}let C="https://mgnrega-eirq.onrender.com";function F(e){var t,a,l,n,o,d,x,h,u,g,p,v,j,y;let{district:f,onChangeDistrict:N}=e,{formatMessage:_}=(0,i.ZK)(),{playAudio:F}=(0,AudioContext.Q)(),[S,L]=(0,r.useState)(!1),[P,R]=(0,r.useState)("overview"),{data:E,isLoading:M,error:A,refetch:T}=(0,c.useQuery)(["district-summary",f.id],async()=>{let e=await m.Z.get("".concat(C,"/api/districts/").concat(f.id,"/summary"));return e.data},{enabled:!!f.id,staleTime:3e5,refetchOnWindowFocus:!1}),{data:G}=(0,c.useQuery)(["district-months",f.id],async()=>{let e=await m.Z.get("".concat(C,"/api/districts/").concat(f.id,"/months?limit=12"));return e.data.months},{enabled:!!f.id,staleTime:3e5}),U=async()=>{L(!0);try{let e=await m.Z.post("".concat(C,"/api/districts/").concat(f.id,"/refresh"));e.data.success&&(await T(),F("data_refreshed",{district_name:f.name,records_updated:e.data.records_updated}))}catch(e){console.error("Failed to refresh data:",e),F("error")}finally{L(!1)}};if(M)return(0,s.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,s.jsx)(LoadingSpinner,{})});if(A)return(0,s.jsx)("div",{className:"text-center py-16",children:(0,s.jsxs)("div",{className:"card max-w-md mx-auto",children:[(0,s.jsx)("div",{className:"text-red-600 mb-4",children:(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"डेटा लोड नहीं हो सका"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"कृपया अपना इंटरनेट कनेक्शन चेक करें"}),(0,s.jsx)("button",{onClick:N,className:"btn-primary",children:"जिला बदलें"})]})});let{district:Z={},summary:W={},latestMonth:z={},yearAgoComparison:I={}}=E||{},O=e=>{let t=Number(e);return Number.isFinite(t)?t:0},K=e=>e>0?"positive":e<0?"negative":"neutral",B=O(null!==(t=null==I?void 0:I.households_registered_change)&&void 0!==t?t:0),H=O(null!==(a=null==I?void 0:I.total_wages_paid_change)&&void 0!==a?a:0),Q=O(null!==(l=null==I?void 0:I.total_persondays_change)&&void 0!==l?l:0),q=O(null!==(n=null==I?void 0:I.women_participation_pct_change)&&void 0!==n?n:0);return(0,s.jsxs)("div",{className:"fade-in",children:[(0,s.jsxs)("div",{className:"dashboard-header",children:[(0,s.jsx)("div",{className:"text-6xl mb-6",children:"\uD83C\uDFDB️"}),(0,s.jsxs)("h1",{className:"dashboard-title",children:[Z.name," जिला"]}),(0,s.jsx)("p",{className:"dashboard-subtitle",children:"मनरेगा कार्यक्रम की जानकारी"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8",children:[(0,s.jsxs)("button",{onClick:N,className:"btn btn-secondary",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDD04"}),"जिला बदलें"]}),(0,s.jsx)("button",{className:"audio-btn",onClick:()=>F("dashboard_help"),"aria-label":"डैशबोर्ड की जानकारी सुनें",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.816L4.846 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.846l3.537-3.816a1 1 0 011.617.816zM16 8a2 2 0 11-4 0 2 2 0 014 0zm-2 6a4 4 0 100-8 4 4 0 000 8z",clipRule:"evenodd"})})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("div",{className:"data-source-indicator",children:[(0,s.jsx)("div",{className:"dot"}),(0,s.jsx)("span",{className:"text-lg font-semibold text-green-700",children:"\uD83D\uDCCA सरकारी डेटा से सीधी जानकारी"})]})}),W.last_updated&&(0,s.jsxs)("p",{className:"text-white opacity-80 mt-4",children:["अंतिम अपडेट: ",new Date(W.last_updated).toLocaleDateString("hi-IN")]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{onClick:U,disabled:S,className:"btn btn-warning",children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"अपडेट हो रहा है..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDD04"}),"नया डेटा लाएं"]})})})]}),(0,s.jsx)("div",{className:"nav-tabs",children:[{key:"overview",label:"मुख्य जानकारी",icon:"\uD83D\uDCCA"},{key:"trends",label:"महीने की तुलना",icon:"\uD83D\uDCC8"},{key:"compare",label:"जिलों की तुलना",icon:"⚖️"},{key:"export",label:"रिपोर्ट डाउनलोड",icon:"\uD83D\uDCC4"}].map(e=>(0,s.jsxs)("button",{onClick:()=>R(e.key),className:"nav-tab ".concat(P===e.key?"active":"inactive"),children:[(0,s.jsx)("span",{className:"text-2xl mr-3",children:e.icon}),(0,s.jsx)("span",{className:"text-lg font-semibold",children:e.label})]},e.key))}),"overview"===P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"metrics-grid mb-16",children:[(0,s.jsx)(b,{metric:"households",value:O(null!==(o=null==W?void 0:W.households_registered)&&void 0!==o?o:0),change:B,changeType:K(B),icon:"households",color:"blue"}),(0,s.jsx)(b,{metric:"wages",value:O(null!==(d=null==W?void 0:W.total_wages_paid)&&void 0!==d?d:0),change:H,changeType:K(H),icon:"wages",color:"green"}),(0,s.jsx)(b,{metric:"persondays",value:O(null!==(x=null==W?void 0:W.total_persondays)&&void 0!==x?x:0),change:Q,changeType:K(Q),icon:"persondays",color:"purple"}),(0,s.jsx)(b,{metric:"women",value:O(null!==(h=null==W?void 0:W.women_participation_pct)&&void 0!==h?h:0),change:q,changeType:K(q),icon:"women",color:"orange"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:[(0,s.jsx)(b,{metric:"works_completed",value:O(null!==(u=null==W?void 0:W.works_completed)&&void 0!==u?u:0),change:O(null!==(g=null==I?void 0:I.works_completed_change)&&void 0!==g?g:0),changeType:K(O(null!==(p=null==I?void 0:I.works_completed_change)&&void 0!==p?p:0)),icon:"works",color:"indigo"}),(0,s.jsx)(b,{metric:"works_ongoing",value:O(null!==(v=null==W?void 0:W.works_ongoing)&&void 0!==v?v:0),change:O(null!==(j=null==I?void 0:I.works_ongoing_change)&&void 0!==j?j:0),changeType:K(O(null!==(y=null==I?void 0:I.works_ongoing_change)&&void 0!==y?y:0)),icon:"works",color:"red"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-12",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mb-4",children:"\uD83D\uDCC8 इस महीने की खास बातें"}),(0,s.jsx)("button",{className:"audio-btn-small",onClick:()=>F("monthly_summary"),"aria-label":"महीने की सारांश सुनें",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.816L4.846 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.846l3.537-3.816a1 1 0 011.617.816zM16 8a2 2 0 11-4 0 2 2 0 014 0zm-2 6a4 4 0 100-8 4 4 0 000 8z",clipRule:"evenodd"})})})]}),z&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"text-center p-6 bg-blue-50 rounded-2xl",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDC6A"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-2",children:(z.households_work_provided||0).toLocaleString("hi-IN")}),(0,s.jsx)("div",{className:"text-lg text-blue-600 font-semibold",children:"परिवारों को काम मिला"})]}),(0,s.jsxs)("div",{className:"text-center p-6 bg-green-50 rounded-2xl",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDCB0"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-800 mb-2",children:["₹",(z.avg_wage||0).toFixed(0)]}),(0,s.jsx)("div",{className:"text-lg text-green-600 font-semibold",children:"औसत दैनिक मजदूरी"})]}),(0,s.jsxs)("div",{className:"text-center p-6 bg-purple-50 rounded-2xl",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDC69"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-purple-800 mb-2",children:[(z.women_participation_pct||0).toFixed(1),"%"]}),(0,s.jsx)("div",{className:"text-lg text-purple-600 font-semibold",children:"महिला भागीदारी"})]})]})]})]}),"trends"===P&&(0,s.jsx)("div",{className:"space-y-8",children:G&&G.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,s.jsx)(w,{data:G.reverse(),metric:"total_persondays",title:"Person Days Generated"})}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,s.jsx)(w,{data:G,metric:"wages_paid",title:"Wages Paid (₹)"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,s.jsx)(w,{data:G,metric:"households_work_provided",title:"Households Provided Work"})}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,s.jsx)(w,{data:G,metric:"women_participation_pct",title:"Women Participation %"})})]})]}):(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"text-gray-500",children:"कोई ट्रेंड डेटा उपलब्ध नहीं है"})})}),"compare"===P&&(0,s.jsx)(k,{currentDistrict:f}),"export"===P&&(0,s.jsx)(D,{district:f})]})}var S=a(8135),L=a(8318);function P(){let{formatMessage:e}=(0,i.ZK)(),t=(0,l.useRouter)(),{location:a,requestLocation:n,isLoading:c}=(0,S.Z)(),{playAudio:m}=(0,AudioContext.Q)(),[x,h]=(0,r.useState)(null),[b,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let{district_id:e}=t.query;e&&!x&&(h({id:parseInt(e)}),v(!1))},[t.query,x]),(0,r.useEffect)(()=>{a&&!x&&j(a)},[a,x]);let j=async e=>{try{let t="".concat("https://mgnrega-eirq.onrender.com","/api/districts/detect?lat=").concat(e.latitude,"&lng=").concat(e.longitude),a=await fetch(t);if(a.ok){let e=await a.json();h(e),v(!1),m("district_detected",{district_name:e.name})}else console.error("District detection failed:",a.status,a.statusText)}catch(e){console.error("Failed to detect district:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:x?"".concat(x.name," - MGNREGA LokDekho"):e("app.title")}),(0,s.jsx)("meta",{name:"description",content:e("app.description")})]}),(0,s.jsx)(d.Z,{children:b?(0,s.jsxs)("div",{className:"container-safe py-8",children:[(0,s.jsxs)("div",{className:"welcome-section fade-in relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,s.jsx)(g.NsK,{className:"absolute top-10 left-10 w-20 h-20"}),(0,s.jsx)(p.I$,{className:"absolute top-20 right-20 w-16 h-16"}),(0,s.jsx)(p.Op,{className:"absolute bottom-20 left-1/4 w-18 h-18"})]}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsx)("div",{className:"p-6 bg-white/20 rounded-full animate-bounce-gentle",children:(0,s.jsx)(g.NsK,{className:"w-20 h-20 text-white"})})}),(0,s.jsx)("h1",{className:"welcome-title",children:e("home.welcome.title")}),(0,s.jsx)("p",{className:"welcome-subtitle",children:e("home.welcome.subtitle")}),(0,s.jsxs)("button",{className:"flex items-center px-8 py-4 bg-white/20 text-white rounded-2xl hover:bg-white/30 transition-all duration-300 hover:scale-110 animate-pulse-slow shadow-2xl backdrop-blur-sm border border-white/30",onClick:()=>m("welcome_message"),"aria-label":e("audio.play_welcome"),children:[(0,s.jsx)(g.hwG,{className:"w-8 h-8 mr-3"}),(0,s.jsx)("span",{className:"text-xl font-bold",children:"स्वागत संदेश सुनें"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto mb-12",children:[(0,s.jsxs)("div",{className:"district-option slide-up hover-lift group",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"p-4 bg-blue-100 rounded-2xl group-hover:bg-blue-200 transition-colors duration-300",children:(0,s.jsx)(L.kXE,{className:"w-12 h-12 text-blue-600"})})}),(0,s.jsxs)("h2",{className:"title flex items-center justify-center",children:[(0,s.jsx)(g.$0r,{className:"w-6 h-6 mr-2 text-blue-600"}),e("home.location.title")]}),(0,s.jsx)("p",{className:"description mb-6",children:e("home.location.description")}),(0,s.jsx)("button",{onClick:()=>{n(),m("location_requested")},disabled:c,className:"btn btn-primary btn-large w-full",children:c?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"खोजा जा रहा है..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.$0r,{className:"w-6 h-6 mr-3"}),e("home.location.button")]})})]}),(0,s.jsxs)("div",{className:"district-option slide-up hover-lift group",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"p-4 bg-green-100 rounded-2xl group-hover:bg-green-200 transition-colors duration-300",children:(0,s.jsx)(L.CDT,{className:"w-12 h-12 text-green-600"})})}),(0,s.jsxs)("h2",{className:"title flex items-center justify-center",children:[(0,s.jsx)(g.PKO,{className:"w-6 h-6 mr-2 text-green-600"}),e("home.manual_select.title")]}),(0,s.jsx)("p",{className:"description mb-6",children:e("home.manual_select.description")}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-6 border border-gray-200",children:[(0,s.jsx)(u,{onSelect:e=>{h(e),v(!1),t.push("/?district_id=".concat(e.id),void 0,{shallow:!0}),m("district_selected",{district_name:e.name})}}),(0,s.jsx)("div",{className:"mt-4 p-3 bg-white rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,s.jsx)(L.$rG,{className:"w-3 h-3 mr-1"}),"API: ","https://mgnrega-eirq.onrender.com"]})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"card-simple p-6 text-center hover-lift group",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"p-4 bg-blue-100 rounded-2xl group-hover:bg-blue-200 transition-colors duration-300",children:(0,s.jsx)(p.I$,{className:"w-8 h-8 text-blue-600"})})}),(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[(0,s.jsx)(g.J8I,{className:"w-5 h-5 mr-2"}),"परिवार की जानकारी"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"अपने जिले में कितने परिवारों को काम मिला"})]}),(0,s.jsxs)("div",{className:"card-simple p-6 text-center hover-lift group",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"p-4 bg-green-100 rounded-2xl group-hover:bg-green-200 transition-colors duration-300",children:(0,s.jsx)(p.t9y,{className:"w-8 h-8 text-green-600"})})}),(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[(0,s.jsx)(g.sF1,{className:"w-5 h-5 mr-2"}),"मजदूरी की जानकारी"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"कुल मजदूरी और औसत दैनिक मजदूरी"})]}),(0,s.jsxs)("div",{className:"card-simple p-6 text-center hover-lift group",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"p-4 bg-purple-100 rounded-2xl group-hover:bg-purple-200 transition-colors duration-300",children:(0,s.jsx)(p.Op,{className:"w-8 h-8 text-purple-600"})})}),(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[(0,s.jsx)(g.OMZ,{className:"w-5 h-5 mr-2"}),"प्रगति रिपोर्ट"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"महीने-दर-महीने की तुलना और चार्ट"})]})]}),(0,s.jsxs)("div",{className:"text-center mt-16 p-8 bg-gradient-to-br from-white to-blue-50 rounded-3xl shadow-2xl border border-gray-200",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,s.jsxs)("div",{className:"flex items-center px-6 py-3 bg-green-100 rounded-full border-2 border-green-300 shadow-lg",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3 animate-pulse"}),(0,s.jsx)(L.$rG,{className:"w-5 h-5 text-green-600 mr-2"}),(0,s.jsx)("span",{className:"text-lg font-semibold text-green-700",children:"सरकारी डेटा से सीधे जानकारी"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center text-gray-600 text-lg",children:[(0,s.jsx)(g.K7e,{className:"w-5 h-5 mr-2"}),(0,s.jsx)("span",{children:"यह जानकारी भारत सरकार के data.gov.in से आती है"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center p-3 bg-blue-50 rounded-xl",children:[(0,s.jsx)(g.qni,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-blue-700",children:"सभी के लिए सुलभ"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center p-3 bg-green-50 rounded-xl",children:[(0,s.jsx)(g.$lZ,{className:"w-5 h-5 text-green-600 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-green-700",children:"बहुभाषी सहायता"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center p-3 bg-purple-50 rounded-xl",children:[(0,s.jsx)(p.THo,{className:"w-5 h-5 text-purple-600 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-purple-700",children:"ग्रामीण मित्र"})]})]})]})]}):x&&(0,s.jsx)(F,{district:x,onChangeDistrict:()=>{v(!0),h(null),t.push("/",void 0,{shallow:!0})}})})]})}}},function(e){e.O(0,[838,365,660,196,913,244,854,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);